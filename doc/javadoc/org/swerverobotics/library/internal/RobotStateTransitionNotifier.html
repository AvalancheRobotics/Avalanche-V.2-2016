<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_51) on Thu Jun 23 21:42:04 EDT 2016 -->
<title>RobotStateTransitionNotifier</title>
<meta name="date" content="2016-06-23">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="RobotStateTransitionNotifier";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/swerverobotics/library/internal/OpModeLoopCounter.html" title="class in org.swerverobotics.library.internal"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/swerverobotics/library/internal/SwerveFtcEventLoop.html" title="class in org.swerverobotics.library.internal"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/swerverobotics/library/internal/RobotStateTransitionNotifier.html" target="_top">Frames</a></li>
<li><a href="RobotStateTransitionNotifier.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.swerverobotics.library.internal</div>
<h2 title="Class RobotStateTransitionNotifier" class="title">Class RobotStateTransitionNotifier</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.swerverobotics.library.internal.RobotStateTransitionNotifier</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">RobotStateTransitionNotifier</span>
extends java.lang.Object</pre>
<div class="block">The point of all this is to hook into the robot controller runtime in order to
 get access to their motor controller shutdown and stop logic. The runtime expects *all*
 the motors and motor controllers to live in the hardware map that it knows about,
 and it runs over the collections of those at times in order to shutdown motors.
 Ours motor controllers etc don't always do that, so we need to compensate.

 Looked at more generally, what we're doing here is providing a general purpose
 notification mechanism that any component can use to register for end-of-user-OpMode
 callbacks.

 The runtime runs down it's hardware map at two distinct times:

      1) when the OpModeManager.'StopRobot' OpMode starts up, which is the OpMode which is run
         whenever there's not a user's OpMode running, it
          a) runs through all the servo controllers and disables their PWM
          b) runs through all the motor controllers and sets them to write mode
          c) runs through all the motors and sets them to zero power and run w/o encoders
          d) runs through all the light sensors and turns of the LED

      2) FtcEventLoopHandler.shutdownMotorControllers() runs through all the motor
         controllers and calls 'close()'.
          a) This is called from FtcEventLoop.teardown(), which also close()s the
             servo controllers, legacy modules, and CDIMs.
          b) This is called from EventLoopManager.stopEventLoopRunnable()
          c) which is called from EventLoopManager.shutdown() (also from setEventLoop())
          d) which is called from Robot.shutdown()
          e) which is called from FtcRobotControllerService.shutdownRobot()
         etc. It's part of robot restart / app closing sequence.

 Our immediate goal here is to build a notification mechanism for both these situations.
 So we build this weird beast that is both a motor and its own controller as that's the
 most efficient way to accomplish the test.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../../org/swerverobotics/library/internal/RobotStateTransitionNotifier.html" title="class in org.swerverobotics.library.internal">RobotStateTransitionNotifier</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/swerverobotics/library/internal/RobotStateTransitionNotifier.html#getInstance()">getInstance</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/swerverobotics/library/internal/RobotStateTransitionNotifier.html#onRobotStateChange(com.qualcomm.robotcore.robot.RobotState)">onRobotStateChange</a></strong>(com.qualcomm.robotcore.robot.RobotState&nbsp;newState)</code>
<div class="block">Called by the FtcRobotControllerActivity hooking infrastructure when the event loop
 changes state.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/swerverobotics/library/internal/RobotStateTransitionNotifier.html#onRobotUpdate(java.lang.String)">onRobotUpdate</a></strong>(java.lang.String&nbsp;status)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/swerverobotics/library/internal/RobotStateTransitionNotifier.html#register(com.qualcomm.robotcore.eventloop.opmode.OpMode, org.swerverobotics.library.internal.IOpModeStateTransitionEvents)">register</a></strong>(com.qualcomm.robotcore.eventloop.opmode.OpMode&nbsp;opModeContext,
        <a href="../../../../org/swerverobotics/library/internal/IOpModeStateTransitionEvents.html" title="interface in org.swerverobotics.library.internal">IOpModeStateTransitionEvents</a>&nbsp;registrant)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/swerverobotics/library/internal/RobotStateTransitionNotifier.html#registerRobotUpdateAction(java.lang.Runnable)">registerRobotUpdateAction</a></strong>(java.lang.Runnable&nbsp;runnable)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/swerverobotics/library/internal/RobotStateTransitionNotifier.html#setStateTransitionCallbacks(android.content.Context, java.util.Collection, java.util.Collection)">setStateTransitionCallbacks</a></strong>(android.content.Context&nbsp;applicationContext,
                           java.util.Collection&lt;java.lang.reflect.Method&gt;&nbsp;onRunningMethods,
                           java.util.Collection&lt;java.lang.reflect.Method&gt;&nbsp;onStartupFailureMethods)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/swerverobotics/library/internal/RobotStateTransitionNotifier.html#unregisterRobotUpdateAction(java.lang.Runnable)">unregisterRobotUpdateAction</a></strong>(java.lang.Runnable&nbsp;runnable)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="register(com.qualcomm.robotcore.eventloop.opmode.OpMode, org.swerverobotics.library.internal.IOpModeStateTransitionEvents)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>register</h4>
<pre>public static&nbsp;void&nbsp;register(com.qualcomm.robotcore.eventloop.opmode.OpMode&nbsp;opModeContext,
            <a href="../../../../org/swerverobotics/library/internal/IOpModeStateTransitionEvents.html" title="interface in org.swerverobotics.library.internal">IOpModeStateTransitionEvents</a>&nbsp;registrant)</pre>
</li>
</ul>
<a name="getInstance()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInstance</h4>
<pre>public static&nbsp;<a href="../../../../org/swerverobotics/library/internal/RobotStateTransitionNotifier.html" title="class in org.swerverobotics.library.internal">RobotStateTransitionNotifier</a>&nbsp;getInstance()</pre>
</li>
</ul>
<a name="setStateTransitionCallbacks(android.content.Context, java.util.Collection, java.util.Collection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setStateTransitionCallbacks</h4>
<pre>public static&nbsp;void&nbsp;setStateTransitionCallbacks(android.content.Context&nbsp;applicationContext,
                               java.util.Collection&lt;java.lang.reflect.Method&gt;&nbsp;onRunningMethods,
                               java.util.Collection&lt;java.lang.reflect.Method&gt;&nbsp;onStartupFailureMethods)</pre>
</li>
</ul>
<a name="registerRobotUpdateAction(java.lang.Runnable)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>registerRobotUpdateAction</h4>
<pre>public static&nbsp;void&nbsp;registerRobotUpdateAction(java.lang.Runnable&nbsp;runnable)</pre>
</li>
</ul>
<a name="unregisterRobotUpdateAction(java.lang.Runnable)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unregisterRobotUpdateAction</h4>
<pre>public static&nbsp;void&nbsp;unregisterRobotUpdateAction(java.lang.Runnable&nbsp;runnable)</pre>
</li>
</ul>
<a name="onRobotUpdate(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onRobotUpdate</h4>
<pre>public static&nbsp;void&nbsp;onRobotUpdate(java.lang.String&nbsp;status)</pre>
</li>
</ul>
<a name="onRobotStateChange(com.qualcomm.robotcore.robot.RobotState)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>onRobotStateChange</h4>
<pre>public static&nbsp;void&nbsp;onRobotStateChange(com.qualcomm.robotcore.robot.RobotState&nbsp;newState)</pre>
<div class="block">Called by the FtcRobotControllerActivity hooking infrastructure when the event loop
 changes state.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>newState</code> - the new state into which the event loop is transitioning.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/swerverobotics/library/internal/OpModeLoopCounter.html" title="class in org.swerverobotics.library.internal"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/swerverobotics/library/internal/SwerveFtcEventLoop.html" title="class in org.swerverobotics.library.internal"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/swerverobotics/library/internal/RobotStateTransitionNotifier.html" target="_top">Frames</a></li>
<li><a href="RobotStateTransitionNotifier.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
